import sys
import pygame
from pygame.locals import *
import random
#global variables
columns = 40
rows = 30
rectWidth = 25
rectHeight = 25
WINDOW_W = columns*rectHeight
WINDOW_H = rows*rectHeight
DISPLAY = pygame.display.set_mode((WINDOW_W,WINDOW_H))



class Cell:
    wall = (100,200,100)
    cell_clicked = 0
    #initial target positon

    def __init__(self,x,y):
        self.x_location = x#starting points
        self.y_location = y
        self.empty = True
        #make starting cell 1,1
        if(self.x_location == 1 and self.y_location == 1):
            self.my_cell = pygame.draw.rect(DISPLAY, (20,25,200), Rect(self.y_location*rectWidth,self.x_location*rectHeight,rectWidth,rectHeight))
            self.start = True
            self.target = False   
        elif(self.x_location == 28 and self.y_location == 38):
            self.my_cell = pygame.draw.rect(DISPLAY, (30,230,200), Rect(self.y_location*rectWidth,self.x_location*rectHeight,rectWidth,rectHeight))
            self.target = True
            self.start = False    
        else:
            self.target = False
            self.start = False

    #only changes if its not a target/starting pos
    def cell_click(self,cell_clicked):
        if(cell_clicked%2 == 0 and self.target == False and self.start == False):
            self.my_cell = pygame.draw.rect(DISPLAY, (0,0,0), Rect(self.y_location*rectWidth,self.x_location*rectHeight,rectWidth,rectHeight))
        if(cell_clicked%2 == 1 and self.target == False and self.start == False):
            self.my_cell = pygame.draw.rect(DISPLAY, (200,69,69), Rect(self.y_location*rectWidth,self.x_location*rectHeight,rectWidth,rectHeight))




def grid(r,c):
    #initiate grid array and target
    grid_arr = [[0 for x in range(c)] for y in range(r)]
    #sets each item in grid_arr to a cell
    for row in range(r):
        for col in range(c):
            grid_arr[row][col] = Cell(row,col)
            #grid_arr[row][col].my_cell = 
    return grid_arr

def draw_grid(surface,grid):
    #horizontal lines
    y = 0
    for row in range(rows):
        y +=rectWidth
        pygame.draw.line(surface, (255,255,255), (0,y),(WINDOW_W, y))

    #vertical lines
    x = 0
    for col in range(columns):
        x+=rectWidth
        pygame.draw.line(surface,(255,255,255), (x,0),(x,WINDOW_H))

def redrawWindow(surface,grid):
    draw_grid(surface,grid)
    pygame.display.update()   

def main():
    #row x col array of cells
    grid_arr = grid(rows,columns)
    done = False
    #'game' loop
    while not done:
        #events
        for event in pygame.event.get():
            redrawWindow(DISPLAY,grid_arr)
            if event.type == pygame.QUIT:
                done = True
            #clicked
            elif event.type == MOUSEMOTION:
                mousex, mousey = event.pos
            elif event.type == MOUSEBUTTONDOWN:
                    mousex, mousey = event.pos
                    cell_y = mousey//rectHeight
                    cell_x = mousex//rectWidth
                    grid_arr[cell_y][cell_x].cell_clicked+=1
                    grid_arr[cell_y][cell_x].cell_click(grid_arr[cell_y][cell_x].cell_clicked)

main()
